openapi: 3.1.1
info:
  title: TeknixIT Identity
  description: TeknixIT Identity provides authentication and authorization services
    for TeknixIT applications.
  version: "1"
paths:
  /v1/accounts/{accountId}:
    get:
      tags:
        - Accounts
      parameters:
        - name: accountId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: OK
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/GetAccountResponse"
            application/json:
              schema:
                $ref: "#/components/schemas/GetAccountResponse"
            text/json:
              schema:
                $ref: "#/components/schemas/GetAccountResponse"
        "401":
          description: Unauthorized
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "403":
          description: Forbidden
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          description: Not Found
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  /v1/accounts/me:
    get:
      deprecated: true
      operationId: GetMyAccountV1
      tags:
        - Accounts
      responses:
        "200":
          description: OK
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/GetAccountResponse"
            application/json:
              schema:
                $ref: "#/components/schemas/GetAccountResponse"
            text/json:
              schema:
                $ref: "#/components/schemas/GetAccountResponse"
        "401":
          description: Unauthorized
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "422":
          description: Unprocessable Entity
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  /v1/accounts:
    post:
      operationId: CreateAccountV1
      tags:
        - Accounts
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAccountRequest"
          text/json:
            schema:
              $ref: "#/components/schemas/CreateAccountRequest"
          application/*+json:
            schema:
              $ref: "#/components/schemas/CreateAccountRequest"
        required: true
      responses:
        "201":
          description: Created
        "400":
          description: Bad Request
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "401":
          description: Unauthorized
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  /v1/connect/authorize:
    get:
      tags:
        - Authorization
      responses:
        "200":
          description: OK
          content:
            application/json: { }
    post:
      tags:
        - Authorization
      responses:
        "200":
          description: OK
          content:
            application/json: { }
  /v1/connect/token:
    post:
      tags:
        - Authorization
      responses:
        "200":
          description: OK
          content:
            application/json: { }
  /v1/connect/end-session:
    get:
      tags:
        - Authorization
      responses:
        "200":
          description: OK
  /v1/users/search:
    get:
      operationId: SearchUsers
      tags:
        - Users
      summary: Search users with various parameter types to test parameter ordering
      parameters:
        - name: query
          in: query
          required: true
          description: Required search query
          schema:
            type: string
        - name: page
          in: query
          required: false
          description: Optional page number with default value
          schema:
            type: integer
            default: 1
        - name: pageSize
          in: query
          required: false
          description: Optional page size with default value
          schema:
            type: integer
            default: 10
        - name: includeDisabled
          in: query
          required: false
          description: Optional boolean with default value
          schema:
            type: boolean
            default: false
        - name: sortBy
          in: query
          required: false
          description: Optional nullable string without default
          schema:
            type: string
            nullable: true
        - name: filterBy
          in: query
          required: true
          description: Required filter parameter
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/GetAccountResponse"
  /v1/users/{userId}/profile:
    put:
      operationId: UpdateUserProfile
      tags:
        - Users
      summary: Update user profile with mixed parameters
      parameters:
        - name: userId
          in: path
          required: true
          description: Required path parameter
          schema:
            type: string
            format: uuid
        - name: version
          in: query
          required: false
          description: Optional version with default
          schema:
            type: integer
            default: 1
        - name: X-Request-ID
          in: header
          required: false
          description: Optional request ID header
          schema:
            type: string
            nullable: true
        - name: force
          in: query
          required: true
          description: Required force flag
          schema:
            type: boolean
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAccountRequest"
        required: true
      responses:
        "200":
          description: OK
  /v1/products/{productId}/items/{itemId}:
    delete:
      operationId: DeleteProductItem
      tags:
        - Products
      summary: Delete with multiple path and query parameters
      parameters:
        - name: productId
          in: path
          required: true
          description: Required product ID
          schema:
            type: string
        - name: itemId
          in: path
          required: true
          description: Required item ID
          schema:
            type: integer
        - name: reason
          in: query
          required: false
          description: Optional reason with default
          schema:
            type: string
            default: "user_request"
        - name: cascade
          in: query
          required: false
          description: Optional cascade flag with default
          schema:
            type: boolean
            default: true
        - name: confirmToken
          in: query
          required: true
          description: Required confirmation token
          schema:
            type: string
      responses:
        "204":
          description: No Content
components:
  schemas:
    AccountOriginDto:
      required:
        - id
        - provider
      type: object
      properties:
        id:
          type: string
        provider:
          $ref: "#/components/schemas/AccountOriginProviderEnum"
    AccountOriginProviderEnum:
      enum:
        - unknown
        - directory
        - system
      type: string
    CreateAccountRequest:
      required:
        - email
        - firstName
        - lastName
        - origin
      type: object
      properties:
        userName:
          type:
            - "null"
            - string
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        sendEmailVerification:
          type: boolean
        disabled:
          type: boolean
        origin:
          $ref: "#/components/schemas/AccountOriginDto"
    GetAccountResponse:
      required:
        - id
        - email
        - emailVerified
        - firstName
        - lastName
        - disabled
        - origin
        - createdAt
        - updatedAt
      type: object
      properties:
        id:
          type: string
          format: uuid
        userName:
          type:
            - "null"
            - string
        email:
          type: string
        emailVerified:
          type: boolean
        firstName:
          type: string
        lastName:
          type: string
        disabled:
          type: boolean
        origin:
          $ref: "#/components/schemas/AccountOriginDto"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ProblemDetails:
      type: object
      properties:
        type:
          type:
            - "null"
            - string
        title:
          type:
            - "null"
            - string
        status:
          pattern: ^-?(?:0|[1-9]\d*)$
          type:
            - "null"
            - integer
            - string
          format: int32
        detail:
          type:
            - "null"
            - string
        instance:
          type:
            - "null"
            - string
